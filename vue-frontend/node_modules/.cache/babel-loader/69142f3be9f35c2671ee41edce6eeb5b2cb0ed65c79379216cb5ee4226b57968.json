{"ast":null,"code":"import axios from 'axios';\nimport UserService from '@/services/User/UserService';\nexport default {\n  data() {\n    return {\n      userName: '',\n      //store the name of the user\n      userSearch: '',\n      //store search content\n      tempUserName: '',\n      //store the name of the user temporarily\n      role: '',\n      //store the role of the user\n      newRole: '',\n      //store the new role of the user\n      isSuccess: false,\n      //true if the user permission has been changed successfully, else false\n      notFound: false,\n      //true if the user name is not found, else false\n      users: []\n    };\n  },\n  methods: {\n    //reset the user permission\n    reset() {\n      axios.get('resetUserPermission', {\n        params: {\n          userName: this.userName,\n          newRole: this.newRole\n        }\n      }).then(response => {\n        if (response.data == '') {\n          this.isSuccess = false;\n          this.notFound = true;\n        } else {\n          this.isSuccess = true;\n          this.notFound = false;\n          this.userName = '';\n          this.newRole = '';\n        }\n      });\n    },\n    //get all users\n    getUsers() {\n      UserService.getUsers().then(response => {\n        this.users = response.data;\n      });\n    },\n    setUser() {\n      this.userName = this.tempUserName;\n    },\n    setTempUser(name) {\n      this.tempUserName = name;\n    }\n  },\n  computed: {\n    //Get required users after searching\n    filteredUsers() {\n      return this.users.filter(user => user.name.toLowerCase().includes(this.userSearch.toLowerCase()));\n    }\n  },\n  created() {\n    this.getUsers();\n  }\n};","map":{"version":3,"mappings":"AAqFA,OAAOA,KAAI,MAAO,OAAM;AACxB,OAAOC,WAAU,MAAO,6BAA4B;AACpD,eAAe;EACXC,IAAI,GAAG;IACH,OAAO;MACHC,QAAQ,EAAE,EAAE;MAAC;MACbC,UAAU,EAAE,EAAE;MAAC;MACfC,YAAY,EAAE,EAAE;MAAC;MACjBC,IAAI,EAAE,EAAE;MAAC;MACTC,OAAO,EAAE,EAAE;MAAC;MACZC,SAAS,EAAE,KAAK;MAAC;MACjBC,QAAQ,EAAE,KAAK;MAAC;MAChBC,KAAK,EAAC;IACV,CAAC;EACL,CAAC;EACDC,OAAO,EAAE;IACL;IACAC,KAAK,GAAG;MACJZ,KAAI,CACCa,GAAG,CAAC,qBAAqB,EAAE;QAACC,MAAM,EAAC;UAACX,QAAQ,EAAC,IAAI,CAACA,QAAQ;UACvDI,OAAO,EAAE,IAAI,CAACA;QAAO;MACzB,CAAC,EACAQ,IAAI,CAAEC,QAAQ,IAAK;QAChB,IAAGA,QAAQ,CAACd,IAAI,IAAE,EAAE,EAAC;UACjB,IAAI,CAACM,SAAQ,GAAI,KAAK;UACtB,IAAI,CAACC,QAAO,GAAI,IAAI;QACxB,OACI;UACA,IAAI,CAACD,SAAQ,GAAI,IAAI;UACrB,IAAI,CAACC,QAAO,GAAI,KAAK;UACrB,IAAI,CAACN,QAAO,GAAI,EAAC;UACjB,IAAI,CAACI,OAAM,GAAI,EAAC;QACpB;MACJ,CAAC,CAAC;IACV,CAAC;IACD;IACAU,QAAQ,GAAE;MACNhB,WAAW,CAACgB,QAAQ,EAAE,CAACF,IAAI,CAAEC,QAAQ,IAAG;QACpC,IAAI,CAACN,KAAI,GAAIM,QAAQ,CAACd,IAAI;MAC9B,CAAC,CAAC;IACN,CAAC;IACDgB,OAAO,GAAE;MACL,IAAI,CAACf,QAAO,GAAI,IAAI,CAACE,YAAW;IACpC,CAAC;IACDc,WAAW,CAACC,IAAI,EAAC;MACb,IAAI,CAACf,YAAW,GAAIe,IAAG;IAC3B;EACJ,CAAC;EACDC,QAAQ,EAAC;IACL;IACAC,aAAa,GAAE;MACX,OAAO,IAAI,CAACZ,KAAK,CAACa,MAAM,CAACC,IAAG,IAAKA,IAAI,CAACJ,IAAI,CAACK,WAAW,EAAE,CAACC,QAAQ,CAAC,IAAI,CAACtB,UAAU,CAACqB,WAAW,EAAE,CAAC,CAAC;IACrG;EACJ,CAAC;EACDE,OAAO,GAAE;IACL,IAAI,CAACV,QAAQ,EAAC;EAClB;AACJ,CAAC","names":["axios","UserService","data","userName","userSearch","tempUserName","role","newRole","isSuccess","notFound","users","methods","reset","get","params","then","response","getUsers","setUser","setTempUser","name","computed","filteredUsers","filter","user","toLowerCase","includes","created"],"sourceRoot":"","sources":["C:\\Users\\Ella\\Desktop\\vue-frontend\\src\\components\\Others\\User\\ChangeUserPermission.vue"],"sourcesContent":["// Made by GRPTeam202205\r\n<template>\r\n    <div>\r\n        <!-- Change User Permission page -->\r\n        <h2>{{$t('Change User Permission')}}</h2>\r\n        <hr />\r\n\r\n        <!-- Find a user -->\r\n        <div class=\"modal fade\" id=\"addUser\" tabindex=\"-1\" aria-labelledby=\"addUserLabel\" aria-hidden=\"true\">\r\n            <div class=\"modal-dialog modal-dialog-scrollable\">\r\n                <div class=\"modal-content\">\r\n                    <div class=\"modal-header\">\r\n                        <h5 class=\"modal-title\" id=\"addUserLabel\">{{$t('Find a User')}}</h5>\r\n                        <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\r\n                    </div>\r\n                    <div class=\"modal-body\">\r\n                        <div class=\"input-group rounded\">\r\n                            <input type=\"search\" class=\"form-control rounded\" :placeholder=\"$t('Search')\" v-model=\"userSearch\"/>\r\n                        </div>\r\n                        <ul class=\"list-group\">\r\n                            <li class=\"list-group-item\" v-for=\"user in filteredUsers\" :key=\"user.id\">\r\n                                <input class=\"form-check-input me-1\" type=\"radio\" @click=\"setTempUser(user.name)\" aria-label=\"...\">\r\n                                {{user.name}}\r\n                            </li>\r\n                        </ul>\r\n                    </div>\r\n                    <div class=\"modal-footer\">\r\n                        <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">{{$t('Cancel')}}</button>\r\n                        <button type=\"button\" class=\"btn btn-primary\" data-bs-dismiss=\"modal\" @click=\"setUser\">{{$t('OK')}}</button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n        <div class=\"row col-md-4 offset-md-4\">\r\n            <!-- Show the following message if the user permission has been changed successfully-->\r\n            <div class=\"alert alert-success\" v-if=\"isSuccess\">\r\n                {{$t('The user permission has been changed successfully!')}}\r\n            </div>\r\n            <!-- Show the following message if the user name is not found-->\r\n            <div class=\"alert alert-danger\" v-if=\"notFound\">\r\n                {{$t('User name is not found!')}}\r\n            </div>\r\n            <!-- Change User Permission form -->\r\n            <div class=\"panel panel-primary\">\r\n                <div class=\"panel-body\">\r\n                    <form @submit.prevent=\"reset\">\r\n                        <!-- Input user name -->\r\n                        <label for=\"userName\">{{$t('User Name')}}</label>\r\n                        <div class=\"input-group mb-3\">\r\n                            <input type=\"text\" list=\"datalistUser\" class=\"form-control\" :placeholder=\"$t('e.g. Ella')\" id= \"userName\" v-model=\"userName\" required> \r\n                            <datalist id=\"datalistUser\">\r\n                                <option v-for = \"user in filteredUsers\" :key = \"user.id\">{{user.name}}</option>   \r\n                            </datalist>\r\n                            <div class=\"input-group-append\" data-bs-toggle=\"modal\" data-bs-target=\"#addUser\">\r\n                                <button class=\"input-group-text\" type=\"button\">\r\n                                    <i class=\"fa fa-search\" style=\"font-size:24px\"></i>\r\n                                </button>\r\n                            </div>\r\n                        </div>\r\n                        <!-- User permission -->\r\n                        <div class=\"form-group\">\r\n                            <label for=\"newRole\" class=\"form-label\">{{$t('Reset Permission')}}</label>\r\n                            <select class=\"form-select\" aria-label=\"Default select example\" v-model=\"newRole\" required>\r\n                                <option selected disabled value=\"\">{{$t('Please choose a role')}}</option>\r\n                                <option>{{$t('Manager')}}</option>\r\n                                <option>{{$t('Warehouse Manager')}}</option>\r\n                                <option>{{$t('Purchase Manager')}}</option>\r\n                                <option>{{$t('Sales Personnel')}}</option>\r\n                            </select>\r\n                        </div>\r\n                        <!-- Click the button to submit the form to the backend -->\r\n                        <div class=\"mt-3\">\r\n                            <button type=\"submit\" class=\"btn btn-primary\" >\r\n                                {{$t('Confirm')}}\r\n                            </button>\r\n                        </div>\r\n                    </form>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport axios from 'axios'\r\nimport UserService from '@/services/User/UserService'\r\nexport default {\r\n    data() {\r\n        return {\r\n            userName: '',//store the name of the user\r\n            userSearch: '',//store search content\r\n            tempUserName: '',//store the name of the user temporarily\r\n            role: '',//store the role of the user\r\n            newRole: '',//store the new role of the user\r\n            isSuccess: false,//true if the user permission has been changed successfully, else false\r\n            notFound: false,//true if the user name is not found, else false\r\n            users:[],\r\n        };\r\n    },\r\n    methods: {\r\n        //reset the user permission\r\n        reset() {\r\n            axios\r\n                .get('resetUserPermission', {params:{userName:this.userName,\r\n                    newRole: this.newRole}\r\n                })\r\n                .then((response) => {\r\n                    if(response.data==''){\r\n                        this.isSuccess = false;\r\n                        this.notFound = true;\r\n                    }\r\n                    else{\r\n                        this.isSuccess = true;\r\n                        this.notFound = false;\r\n                        this.userName = ''\r\n                        this.newRole = ''\r\n                    }\r\n                });\r\n        },\r\n        //get all users\r\n        getUsers(){\r\n            UserService.getUsers().then((response)=>{\r\n                this.users = response.data;\r\n            });\r\n        },\r\n        setUser(){\r\n            this.userName = this.tempUserName\r\n        },\r\n        setTempUser(name){\r\n            this.tempUserName = name\r\n        },\r\n    },\r\n    computed:{\r\n        //Get required users after searching\r\n        filteredUsers(){\r\n            return this.users.filter(user => user.name.toLowerCase().includes(this.userSearch.toLowerCase()));\r\n        },\r\n    },\r\n    created(){\r\n        this.getUsers()\r\n    }\r\n};\r\n</script>\r\n\r\n<style>\r\n.box{\r\n    background-color: lightblue;\r\n    min-height: 50px;\r\n    width: 200px;\r\n    position: relative;\r\n}\r\n</style>"]},"metadata":{},"sourceType":"module","externalDependencies":[]}